import{r as k,l as R,i as S,t as C,d as n,y as d,o as r,f as o,u as a,c as v,e as q,C as u,a as l,A as p}from"./index-Cbi0U6DV.js";import{a as N}from"./auth.service-DhrNQ524.js";import"./vue-query.util-lOWJ5HDm.js";import{u as V}from"./useToast-B4MSvbJT.js";import{W as $}from"./Wrapper-s5bwIfmP.js";import{_ as w}from"./index-CqGDrZxV.js";import{_ as f}from"./Button-CUE8qzFr.js";import{c as B,a as x,b as A}from"./index.esm-DNmh2VVa.js";import"./CustomToast.vue_vue_type_style_index_0_scoped_d3a5404c_lang-BLp73gA1.js";import"./error-input-BGMKAoGp.js";const E=B({password:x().required("Required").min(6,"Password must be at least 6 characters"),confirm_password:x().required("Required").oneOf([A("password")],"Passwords do not match")}),F={class:"flex flex-col items-center"},T={class:"text-[24px] font-bold"},W={class:"text-base font-medium max-w-[328px] text-center mt-4"},j={key:0,class:"w-[60%] mt-10 mb-8 flex flex-col gap-5"},Q={__name:"index",setup(D){const y=k(!1),b=R(),i=C(),c=V(),P=b.query.token,{mutateAsync:g,isLoading:h}=N.setPassword(),{handleSubmit:_}=S({validationSchema:E,initialValues:{password:"",confirm_password:""}}),m=_(async e=>{await g({bodyPayload:{password:e==null?void 0:e.password,token:P}}).then(s=>{var t;c.success(((t=s==null?void 0:s.data)==null?void 0:t.message)||"Password has been set successfully"),y.value=!0,i.push({path:"/user/login"})}).catch(s=>{var t;c.danger(((t=s==null?void 0:s.data)==null?void 0:t.error)||"Failed to set password")})});return(e,s)=>(r(),n($,null,{content:d(()=>[o("form",{onSubmit:s[1]||(s[1]=(...t)=>a(m)&&a(m)(...t)),class:"flex flex-col w-[520px] min-h-[650px] gap-2 rounded-[32px] bg-background py-10 justify-between"},[o("div",F,[o("h1",T,u(e.successResetPassword?"Password Updated!":"Create New Password"),1),o("p",W,u(e.successResetPassword?"Please sign in to your account":""),1),e.successResetPassword?q("",!0):(r(),v("div",j,[l(w,{type:"password",name:"password",placeholder:"Enter new password"}),l(w,{type:"password",name:"confirm_password",placeholder:"Confirm new password"})])),e.successResetPassword?(r(),n(a(f),{key:2,type:"button",variant:"destructive",class:"w-[60%] h-[44px] text-center font-semibold mt-10",onClick:s[0]||(s[0]=()=>a(i).push({path:"/user/login"}))},{default:d(()=>s[3]||(s[3]=[p(" Go to Sign In ")])),_:1})):(r(),n(a(f),{key:1,loading:a(h),type:"submit",variant:"destructive",class:"w-[60%] h-[44px] text-center font-semibold"},{default:d(()=>s[2]||(s[2]=[p(" Create Password ")])),_:1},8,["loading"]))]),s[4]||(s[4]=o("div",null,null,-1))],32)]),_:1}))}};export{Q as default};
