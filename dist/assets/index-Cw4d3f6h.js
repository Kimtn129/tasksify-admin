import{E as S,d as c,o as n,y as r,G as g,g as q,u as e,n as F,I as Ve,h as Ne,Q as k,w as Fe,a2 as Me,c as x,F as E,a3 as De,a as o,e as h,A as b,C,f as V,a4 as ie,_ as Ae,K as j,L as O,D as Te,a5 as oe,a6 as de,r as A,i as je,l as Ie,a7 as Ue,a8 as Le,a0 as Oe}from"./index-Cbi0U6DV.js";import{u as Ee}from"./useToast-B4MSvbJT.js";import{f as te,_ as U,a as Ge,h as ze,j as He,k as Ke,l as Qe,m as Xe,C as Re,n as We,u as Ze,b as Je,c as Ye,d as et,e as tt,g as at}from"./SearchField-BSKMRoZw.js";import{c as _}from"./vue-query.util-lOWJ5HDm.js";import{a as H}from"./admin.service-B5sxvV3A.js";import{T as K}from"./CustomToast.vue_vue_type_style_index_0_scoped_d3a5404c_lang-BLp73gA1.js";import{u as st}from"./upperFirst-DL2S_n3h.js";import{c as lt,X as rt,Z as nt,G as it,a as ue,S as ot,H as dt,O as N,d as ut,e as J,f as ct,U as ft,J as pt,g as mt,Q as yt,q as gt,W as _t,j as ht,Y as bt,h as qt,$ as vt,_ as T,i as xt}from"./Button-CUE8qzFr.js";import{_ as Z}from"./DialogComponent-B60xUe9I.js";import{u as St,_ as ce,a as fe,b as pe,C as me,c as ye,F as ae}from"./FormItemInput-P0g9CBxt.js";import{c as $t,a as L}from"./index.esm-DNmh2VVa.js";import{_ as Ct,a as wt,b as Bt}from"./PopoverContent-BpCVHD7q.js";import{a as Q}from"./datetime.util-Dpk3AL1b.js";import{P as kt}from"./plus-CaFZ2a7H.js";import"./Icon-CKJzfIt9.js";import"./error-input-BGMKAoGp.js";import"./icon-back-D1amKHfi.js";import"./eye-CAA7plyz.js";/**
 * @license lucide-vue-next v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=lt("CalendarIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Vt={__name:"SelectGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(t){const s=t,i=S(()=>{const{class:a,...l}=s;return l});return(a,l)=>(n(),c(e(rt),q({class:e(_)("p-1 w-full",s.class)},i.value),{default:r(()=>[g(a.$slots,"default")]),_:3},16,["class"]))}},Nt={__name:"SelectLabel",props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(t){const s=t;return(i,a)=>(n(),c(e(nt),{class:F(e(_)("py-1.5 pl-8 pr-2 text-sm font-semibold",s.class))},{default:r(()=>[g(i.$slots,"default")]),_:3},8,["class"]))}},Ft={__name:"SelectSeparator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(t){const s=t,i=S(()=>{const{class:a,...l}=s;return l});return(a,l)=>(n(),c(e(it),q(i.value,{class:e(_)("-mx-1 my-1 h-px bg-muted",s.class)}),null,16,["class"]))}},Mt=({setOpenPopup:t,setId:s})=>{const{isSuperAdmin:i}=Ve(Ne());return[{accessorKey:"remind_start",header:({column:a})=>k(U,{column:a,title:"Start Date"}),cell:({row:a})=>k(K,{truncated:!0},()=>{var l,u;if((l=a.original)!=null&&l.notification_settings.length)return te((u=a.original.notification_settings[0])==null?void 0:u.remind_start,"dd MMM yyyy")}),enableSorting:!0},{accessorKey:"remind_end",header:({column:a})=>k(U,{column:a,title:"End Date"}),cell:({row:a})=>k(K,{truncated:!0},()=>{var l,u;if((l=a.original)!=null&&l.notification_settings.length)return[te((u=a.original.notification_settings[0])==null?void 0:u.remind_end,"dd MMM yyyy")]}),enableSorting:!0},{accessorKey:"notification_type",header:({column:a})=>k(U,{column:a,title:"Notification Type"}),cell:({row:a})=>k(K,{truncated:!0,type:"primary"},()=>[st(a.getValue("notification_type"))]),enableSorting:!1,cellClass:"w-[150px]"},{accessorKey:"message",header:({column:a})=>k(U,{column:a,title:"Notification"}),cell:({row:a})=>k(K,{truncated:!0},()=>a.getValue("message")),enableSorting:!1},{accessorKey:"actions",header:({column:a})=>k(U,{column:a,title:"Actions"}),cellClass:"w-[47px]",cell:({row:a})=>k(Ge,{actions:["edit","delete"],setOpenPopup:t,setId:()=>s(a.original)}),enableSorting:!1}]},Dt={__name:"Textarea",props:{class:{type:null,required:!1},defaultValue:{type:[String,Number],required:!1},modelValue:{type:[String,Number],required:!1}},emits:["update:modelValue"],setup(t,{emit:s}){const i=t,l=St(i,"modelValue",s,{passive:!0,defaultValue:i.defaultValue});return(u,f)=>Fe((n(),x("textarea",{"onUpdate:modelValue":f[0]||(f[0]=m=>E(l)?l.value=m:null),class:F(e(_)("flex min-h-20 w-full rounded-md text-secondary border border-grey-400 bg-background px-3 py-2 text-[13px] ring-offset-background placeholder:text-foreground focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50",i.class))},null,2)),[[Me,e(l)]])}},At={class:"relative"},Tt={key:2,class:"text-destructive text-sm"},se={__name:"FormFieldTextArea",props:{name:{type:String,default:""},type:{type:String,default:"text"},label:{type:String,default:""},placeholder:{type:String,default:""},description:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:String,default:""},errors:{type:Object,default:()=>({})},config:{type:Object,default:()=>({})},maxlength:{type:Number,default:null},clearable:{type:Boolean,default:!1}},setup(t){const i=De("isViewMode",{isViewMode:!1,handleChangeMode:()=>{}}),a=i==null?void 0:i.isViewMode;return(l,u)=>(n(),c(e(ie),{name:t.name},{default:r(({componentField:f,handleChange:m,value:v,errorMessage:$})=>[o(e(ce),{class:"w-full mt-3"},{default:r(()=>[t.label?(n(),c(e(fe),{key:0,class:F(["text-[14px] text-primary",{required:!e(a)&&t.required}])},{default:r(()=>[b(C(t.label),1)]),_:1},8,["class"])):h("",!0),o(e(pe),null,{default:r(()=>[g(l.$slots,"default",{componentField:f,errorMessage:$},()=>[V("div",At,[o(Dt,q({type:t.type,placeholder:t.placeholder,class:["pr-[30px] text-primary border-secondary-foreground"]},f,{disabled:t.disabled,maxlength:t.maxlength}),null,16,["type","placeholder","disabled","maxlength"]),$?(n(),c(e(me),{key:0,size:16,class:"icon-clear font-normal text-destructive absolute top-[45%] right-[10px]"})):h("",!0),t.clearable&&(v!=null&&v.length)&&!$?(n(),c(e(ue),{key:1,class:"icon-clear text-[#666666]",size:"20",onClick:B=>m("")},null,8,["onClick"])):h("",!0)])])]),_:2},1024),t.description?(n(),c(ye,{key:1},{default:r(()=>[b(C(t.description),1)]),_:1})):h("",!0),$?(n(),x("div",Tt,C($),1)):h("",!0)]),_:2},1024)]),_:3},8,["name"]))}},le=$t({notification_type:L().required("Notification type is required"),message:L().required("Notification message is required"),title:L().required("Title is required"),remind_start:L().required("Start date is required"),remind_end:L().required("End date is required")}),jt={"label-style":"_label-style_1t617_1","required-symbol-style":"_required-symbol-style_1t617_6","error-style":"_error-style_1t617_10"},It={key:0,class:"text-primary mb-2"},Ut={__name:"FormControl",props:{label:{type:String,required:!1},errorMessage:{type:String,required:!1},required:{type:Boolean,required:!1}},setup(t){return(s,i)=>(n(),x("div",null,[g(s.$slots,"label",{},()=>[t.label?(n(),x("label",It,[b(C(t.label)+" ",1),t.required?(n(),x("span",{key:0,class:F(s.classes["required-symbol-style"])},"*",2)):h("",!0)])):h("",!0)]),g(s.$slots,"default"),g(s.$slots,"error",{},()=>[t.errorMessage?(n(),x("span",{key:0,class:F(s.classes["error-style"])},C(t.errorMessage),3)):h("",!0)])]))}},Lt={classes:jt},Ot=Ae(Ut,[["__cssModules",Lt]]),Et={key:0,class:"w-full h-8 flex justify-center items-center"},Gt={__name:"SingleSelect",props:{placeholder:{type:String,required:!1},label:{type:String,required:!1},options:{type:Array,required:!1},triggerClass:{type:String,required:!1},itemClass:{type:String,required:!1},seperator:{type:Boolean,required:!1},loading:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1}},setup(t){return(s,i)=>(n(),c(e(Xe),null,{default:r(()=>[o(e(ze),{disabled:t.loading,class:F(e(_)("w-full h-[39px] text-secondary border border-input rounded-[8px]",t.triggerClass))},{default:r(()=>[t.loading?(n(),x("p",Et,"Loading...")):(n(),c(e(He),{key:1,placeholder:t.placeholder,class:"h-6"},null,8,["placeholder"]))]),_:1},8,["disabled","class"]),o(e(Ke),null,{default:r(()=>[o(e(Vt),null,{default:r(()=>[t.label?(n(),c(e(Nt),{key:0},{default:r(()=>[b(C(t.label),1)]),_:1})):h("",!0),(n(!0),x(j,null,O(t.options,a=>(n(),c(e(Qe),{key:a.id,value:a.value,class:F(e(_)("h-12",t.itemClass)),disabled:t.disabled},{default:r(()=>[b(C(a.label),1)]),_:2},1032,["value","class","disabled"]))),128)),t.seperator?(n(),c(Ft,{key:1})):h("",!0),g(s.$slots,"default")]),_:3})]),_:3})]),_:3}))}},re=Object.assign({inheritAttrs:!1},{__name:"VeeSingleSelect",props:{name:{type:String,required:!1},nameLabel:{type:String,required:!1},placeholder:{type:String,required:!1},label:{type:String,required:!1},options:{type:Array,required:!1},triggerClass:{type:String,required:!1},itemClass:{type:String,required:!1},errorMessage:{type:String,required:!1},seperator:{type:Boolean,required:!1},required:{type:Boolean,required:!1},loading:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(t,{emit:s}){const i=t,{value:a,errorMessage:l}=Te(()=>i.name),u=s,f=m=>{u("update:modelValue",m)};return(m,v)=>(n(),c(Ot,{label:t.label,errorMessage:e(l),required:t.required},{default:r(()=>[o(Gt,q({modelValue:e(a),"onUpdate:modelValue":v[0]||(v[0]=$=>E(a)?a.value=$:null),placeholder:t.placeholder,options:i.options},m.$attrs,{"onUpdate:modelValue":f,loading:t.loading,disabled:t.disabled}),null,16,["modelValue","placeholder","options","loading","disabled"])]),_:1},8,["label","errorMessage","required"]))}}),zt={class:"flex flex-col gap-y-4 mt-4 sm:flex-row sm:gap-x-4 sm:gap-y-0"},Ht={__name:"Calendar",props:{modelValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},defaultValue:{type:null,required:!1},defaultPlaceholder:{type:null,required:!1},placeholder:{type:null,required:!1},pagedNavigation:{type:Boolean,required:!1},preventDeselect:{type:Boolean,required:!1},weekStartsOn:{type:Number,required:!1},weekdayFormat:{type:String,required:!1},calendarLabel:{type:String,required:!1},fixedWeeks:{type:Boolean,required:!1},maxValue:{type:null,required:!1},minValue:{type:null,required:!1},locale:{type:String,required:!1},numberOfMonths:{type:Number,required:!1},disabled:{type:Boolean,required:!1},readonly:{type:Boolean,required:!1},initialFocus:{type:Boolean,required:!1},isDateDisabled:{type:Function,required:!1},isDateUnavailable:{type:Function,required:!1},dir:{type:String,required:!1},nextPage:{type:Function,required:!1},prevPage:{type:Function,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["update:modelValue","update:placeholder"],setup(t,{emit:s}){const i=t,a=s,l=S(()=>{const{class:f,...m}=i;return m}),u=ot(l,a);return(f,m)=>(n(),c(e(dt),q({class:e(_)("p-3",i.class)},e(u)),{default:r(({grid:v,weekDays:$})=>[o(e(Jt),null,{default:r(()=>[o(e(ta)),o(e(Yt)),o(e(ea))]),_:1}),V("div",zt,[(n(!0),x(j,null,O(v,B=>(n(),c(e(Xt),{key:B.value.toString()},{default:r(()=>[o(e(Wt),null,{default:r(()=>[o(e(ne),null,{default:r(()=>[(n(!0),x(j,null,O($,M=>(n(),c(e(Zt),{key:M},{default:r(()=>[b(C(M),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),o(e(Rt),null,{default:r(()=>[(n(!0),x(j,null,O(B.rows,(M,R)=>(n(),c(e(ne),{key:`weekDate-${R}`,class:"mt-2 w-full"},{default:r(()=>[(n(!0),x(j,null,O(M,D=>(n(),c(e(Kt),{key:D.toString(),date:D},{default:r(()=>[o(e(Qt),{day:D,month:B.value},null,8,["day","month"])]),_:2},1032,["date"]))),128))]),_:2},1024))),128))]),_:2},1024)]),_:2},1024))),128))])]),_:1},16,["class"]))}},Kt={__name:"CalendarCell",props:{date:{type:null,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(t){const s=t,i=S(()=>{const{class:l,...u}=s;return u}),a=N(i);return(l,u)=>(n(),c(e(ut),q({class:e(_)("relative h-9 w-9 p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([data-selected])]:rounded-md [&:has([data-selected])]:bg-accent [&:has([data-selected][data-outside-view])]:bg-accent/50",s.class)},e(a)),{default:r(()=>[g(l.$slots,"default")]),_:3},16,["class"]))}},Qt={__name:"CalendarCellTrigger",props:{day:{type:null,required:!0},month:{type:null,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(t){const s=t,i=S(()=>{const{class:l,...u}=s;return u}),a=N(i);return(l,u)=>(n(),c(e(ct),q({class:e(_)(e(J)({variant:"ghost"}),"h-9 w-9 p-0 font-normal","[&[data-today]:not([data-selected])]:bg-accent [&[data-today]:not([data-selected])]:text-accent-foreground","data-[selected]:bg-primary data-[selected]:text-primary-foreground data-[selected]:opacity-100 data-[selected]:hover:bg-primary data-[selected]:hover:text-primary-foreground data-[selected]:focus:bg-primary data-[selected]:focus:text-primary-foreground","data-[disabled]:text-muted-foreground data-[disabled]:opacity-50","data-[unavailable]:text-destructive-foreground data-[unavailable]:line-through","data-[outside-view]:text-muted-foreground data-[outside-view]:opacity-50 [&[data-outside-view][data-selected]]:bg-accent/50 [&[data-outside-view][data-selected]]:text-muted-foreground [&[data-outside-view][data-selected]]:opacity-30",s.class)},e(a)),{default:r(()=>[g(l.$slots,"default")]),_:3},16,["class"]))}},Xt={__name:"CalendarGrid",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(t){const s=t,i=S(()=>{const{class:l,...u}=s;return u}),a=N(i);return(l,u)=>(n(),c(e(ft),q({class:e(_)("w-full border-collapse space-y-1",s.class)},e(a)),{default:r(()=>[g(l.$slots,"default")]),_:3},16,["class"]))}},Rt={__name:"CalendarGridBody",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const s=t;return(i,a)=>(n(),c(e(pt),oe(de(s)),{default:r(()=>[g(i.$slots,"default")]),_:3},16))}},Wt={__name:"CalendarGridHead",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const s=t;return(i,a)=>(n(),c(e(mt),oe(de(s)),{default:r(()=>[g(i.$slots,"default")]),_:3},16))}},ne={__name:"CalendarGridRow",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(t){const s=t,i=S(()=>{const{class:l,...u}=s;return u}),a=N(i);return(l,u)=>(n(),c(e(yt),q({class:e(_)("flex",s.class)},e(a)),{default:r(()=>[g(l.$slots,"default")]),_:3},16,["class"]))}},Zt={__name:"CalendarHeadCell",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(t){const s=t,i=S(()=>{const{class:l,...u}=s;return u}),a=N(i);return(l,u)=>(n(),c(e(gt),q({class:e(_)("w-9 rounded-md text-[0.8rem] font-normal text-muted-foreground",s.class)},e(a)),{default:r(()=>[g(l.$slots,"default")]),_:3},16,["class"]))}},Jt={__name:"CalendarHeader",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(t){const s=t,i=S(()=>{const{class:l,...u}=s;return u}),a=N(i);return(l,u)=>(n(),c(e(_t),q({class:e(_)("relative flex w-full items-center justify-between pt-1",s.class)},e(a)),{default:r(()=>[g(l.$slots,"default")]),_:3},16,["class"]))}},Yt={__name:"CalendarHeading",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(t){const s=t,i=S(()=>{const{class:l,...u}=s;return u}),a=N(i);return(l,u)=>(n(),c(e(ht),q({class:e(_)("text-sm font-medium",s.class)},e(a)),{default:r(({headingValue:f})=>[g(l.$slots,"default",{headingValue:f},()=>[b(C(f),1)])]),_:3},16,["class"]))}},ea={__name:"CalendarNextButton",props:{step:{type:String,required:!1},nextPage:{type:Function,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(t){const s=t,i=S(()=>{const{class:l,...u}=s;return u}),a=N(i);return(l,u)=>(n(),c(e(bt),q({class:e(_)(e(J)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",s.class)},e(a)),{default:r(()=>[g(l.$slots,"default",{},()=>[o(e(Re),{class:"h-4 w-4"})])]),_:3},16,["class"]))}},ta={__name:"CalendarPrevButton",props:{step:{type:String,required:!1},prevPage:{type:Function,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(t){const s=t,i=S(()=>{const{class:l,...u}=s;return u}),a=N(i);return(l,u)=>(n(),c(e(qt),q({class:e(_)(e(J)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",s.class)},e(a)),{default:r(()=>[g(l.$slots,"default",{},()=>[o(e(We),{class:"h-4 w-4"})])]),_:3},16,["class"]))}},aa={class:"relative mt-2"},sa={key:2,class:"text-destructive text-sm"},X={__name:"DatePicker",props:{name:{type:String,required:!0},type:{type:String,default:"text"},label:{type:String,default:""},placeholder:{type:String,default:""},description:{type:String,default:""},hideFormMessage:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1}},setup(t){const s=new vt("en-US",{dateStyle:"long"});return(i,a)=>(n(),c(e(ie),{name:t.name},{default:r(({componentField:l,handleChange:u,value:f,errorMessage:m})=>[o(e(ce),{class:"w-full"},{default:r(()=>[t.label?(n(),c(e(fe),{key:0,class:"text-[14px] text-primary"},{default:r(()=>[b(C(t.label),1)]),_:1})):h("",!0),o(e(pe),null,{default:r(()=>[g(i.$slots,"default",{componentField:l,errorMessage:m},()=>[V("div",aa,[o(e(Ct),null,{default:r(()=>[o(e(wt),{"as-child":""},{default:r(()=>[o(e(T),{variant:"outline",class:F(e(_)("w-[180px] justify-start text-left font-normal",!f&&"text-muted-foreground"))},{default:r(()=>{var v;return[o(e(Pt),{class:"mr-2 h-4 w-4"}),b(" "+C(f?e(s).format((v=f==null?void 0:f.toDate)==null?void 0:v.call(f,e(xt)())):"Pick a date"),1)]}),_:2},1032,["class"])]),_:2},1024),o(e(Bt),{class:"w-auto p-0"},{default:r(()=>[o(e(Ht),q(l,{"initial-focus":""}),null,16)]),_:2},1024)]),_:2},1024),m?(n(),c(e(me),{key:0,size:16,class:"icon-clear font-normal text-destructive absolute top-[40%] right-[10px]"})):h("",!0),t.clearable&&(f!=null&&f.length)&&!m?(n(),c(e(ue),{key:1,class:"icon-clear text-[#666666]",size:"20",onClick:v=>u("")},null,8,["onClick"])):h("",!0)])])]),_:2},1024),t.description?(n(),c(e(ye),{key:1},{default:r(()=>[b(C(t.description),1)]),_:1})):h("",!0),m?(n(),x("div",sa,C(m),1)):h("",!0)]),_:2},1024)]),_:3},8,["name"]))}},la={class:"flex justify-between items-center mb-5"},ra={class:"mt-[32px]"},na={class:"flex justify-between items-center"},ia={class:"mt-4 flex justify-end items-center"},ka={__name:"index",setup(t){const s=[{id:1,value:"system",label:"System"},{id:2,value:"features",label:"Features"},{id:3,value:"maps",label:"Maps"},{id:4,value:"events",label:"Events"}],i=A(""),a=A(!1),l=A(!1),u=A(!1),f=A(null),m=Ee(),v=Ie(),{sort:$,sortParams:B}=Ze({isMultiSort:!1,sortBy:"createdAt",orderBy:"desc"}),{search:M,searchBy:R}=Je({search:"",searchBy:"notifications"}),{pagination:D,page:G,perPage:z}=Ye({writeQuery:!0}),Y=A(M.value),ge=S(()=>{var y,d;return{page:G,take:z,sort:(y=B==null?void 0:B.value)==null?void 0:y.orderBy,sortBy:(d=B==null?void 0:B.value)==null?void 0:d.sortBy,search:Y,searchBy:R.value}}),{data:_e,isFetching:he,refetch:W}=H.getNotifications(ge),{mutateAsync:be,isLoading:qe}=H.addNotification(),ve=H.updateNotification(),xe=H.deleteNotification(),{items:Se}=et(_e,{pagination:D}),ee=S(()=>f.value?{...f.value,remind_start:"",remind_end:""}:{notification_type:"",title:"",message:"",remind_start:"",remind_end:""}),{handleSubmit:$e}=je({validationSchema:le,initialValues:ee}),Ce=Mt({setOpenPopup:y=>{y==="edit"&&(l.value=!0),y==="confirm"&&(u.value=!0)},setId:y=>{f.value=y}}),we=$e(y=>{const d={...y,remind_start:Q(y.remind_start),remind_end:Q(y.remind_end)};be({bodyPayload:d}).then(p=>{var w;m.success(((w=p==null?void 0:p.data)==null?void 0:w.message)||"Notification has been successfully created"),a.value=!1,W()}).catch(p=>{var w;m.danger(((w=p==null?void 0:p.data)==null?void 0:w.error)||"Failed to create notification")})}),Be=y=>{var w;const d=(w=f==null?void 0:f.value)==null?void 0:w.id;if(!d)return m.danger("Invalid ID. Unable to update notification");const p={...y,remind_start:Q(y.remind_start),remind_end:Q(y.remind_end)};ve.mutateAsync({bodyPayload:p,pathParams:{id:d}}).then(P=>{var I;m.success(((I=P.data)==null?void 0:I.message)||"Notification has been successfully updated"),l.value=!1,W()}).catch(P=>{var I;m.danger(((I=P.data)==null?void 0:I.error)||"Failed to update notification")})},ke=y=>{var p;const d=(p=f==null?void 0:f.value)==null?void 0:p.id;if(!d)return m.danger("Invalid ID. Unable to delete the notification.");xe.mutateAsync({bodyPayload:y,pathParams:{id:d}}).then(w=>{var P;m.success(((P=w.data)==null?void 0:P.message)||"Notification has been successfully deleted"),u.value=!1,W()}).catch(w=>{var P;m.danger(((P=w.data)==null?void 0:P.error)||"Failed to delete notification")})},Pe=y=>{const d=y.target.value;Oe.replace({path:"/admin/notifications",query:{...v.query,page:1,search:d}}),Y.value=d};return(y,d)=>(n(),x(j,null,[d[15]||(d[15]=V("h2",{class:"mt-2"},"Notifcations",-1)),V("div",la,[o(e(T),{variant:"destructive",class:"mt-2",onClick:d[0]||(d[0]=p=>a.value=!0)},{default:r(()=>[o(e(kt),{class:"mr-2s"}),d[10]||(d[10]=b(" Add Notification "))]),_:1}),o(tt,{placeholder:"Search notification",handleSearch:Pe})]),V("div",ra,[o(at,{page:e(G),"onUpdate:page":d[1]||(d[1]=p=>E(G)?G.value=p:null),perPage:e(z),"onUpdate:perPage":d[2]||(d[2]=p=>E(z)?z.value=p:null),sort:e($),"onUpdate:sort":d[3]||(d[3]=p=>E($)?$.value=p:null),searching:!!i.value,"enable-hover-on-row":!1,"header-height":58,"enable-row-selection":!1,"table-height":"100vh - 300px","item-name":"member",data:e(Se),columns:e(Ce),pagination:e(D),"default-rows-per-page":10,isLoading:e(he)},null,8,["page","perPage","sort","searching","data","columns","pagination","isLoading"])]),o(Z,{modelValue:a.value,"onUpdate:modelValue":d[6]||(d[6]=p=>a.value=p),"is-show-footer":!1,title:"Create Notification"},{default:r(()=>[V("form",{onSubmit:d[4]||(d[4]=Ue(()=>{},["prevent"]))},[o(re,{label:"Notification Type",name:"notification_type",placeholder:"Select",options:s}),o(ae,{label:"Title",name:"title"}),o(se,{label:"Message",name:"message"}),V("div",na,[o(X,{label:"Start Date",name:"remind_start"}),o(X,{label:"End Date",name:"remind_end"})])],32)]),footer:r(()=>[o(e(T),{onClick:e(we),variant:"destructive",loading:e(qe)},{default:r(()=>d[11]||(d[11]=[b(" Create Notification ")])),_:1},8,["onClick","loading"]),o(e(T),{onClick:d[5]||(d[5]=p=>a.value=!1)},{default:r(()=>d[12]||(d[12]=[b(" Cancel ")])),_:1})]),_:1},8,["modelValue"]),o(Z,{modelValue:l.value,"onUpdate:modelValue":d[8]||(d[8]=p=>l.value=p),"is-show-footer":!1,title:"Modify Map"},{default:r(()=>[o(e(Le),{"initial-values":ee.value,"validation-schema":e(le),onSubmit:Be},{default:r(()=>[o(re,{label:"Notification Type",name:"notification_type",placeholder:"Select",options:s}),o(ae,{label:"Title",name:"title"}),o(se,{label:"Message",name:"message"}),o(X,{label:"Start Date",name:"remind_start"}),o(X,{label:"End Date",name:"remind_end"}),V("div",ia,[o(e(T),{type:"submit",variant:"destructive",class:"mr-4",loading:!1},{default:r(()=>d[13]||(d[13]=[b(" Save Changes ")])),_:1}),o(e(T),{type:"button",onClick:d[7]||(d[7]=p=>l.value=!1),variant:"outline"},{default:r(()=>d[14]||(d[14]=[b(" Cancel ")])),_:1})])]),_:1},8,["initial-values","validation-schema"])]),_:1},8,["modelValue"]),o(Z,{modelValue:u.value,"onUpdate:modelValue":d[9]||(d[9]=p=>u.value=p),title:"Delete this notification?",description:"Are you sure you want to delete this notification?",onConfirm:ke},null,8,["modelValue"])],64))}};export{ka as default};
