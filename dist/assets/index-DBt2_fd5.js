import{r as k,k as R,i as S,p as v,d as n,x as d,o as r,f as o,u as a,c as C,e as q,B as u,a as p,z as l}from"./index-Cn06d1yw.js";import{a as B}from"./auth.service-KxhvcDQI.js";import"./vue-query.util-evjr9S1L.js";import{u as N}from"./useToast-C1hprg7S.js";import{W as V}from"./Wrapper-BTk7vWuE.js";import{_ as w}from"./index-hJ0phxau.js";import{_ as f}from"./Button-lUNRF2yf.js";import{c as $,a as x,b as E}from"./index.esm-DNmh2VVa.js";import"./CustomToast.vue_vue_type_style_index_0_scoped_d3a5404c_lang-BP7u1LgJ.js";import"./error-input-DKRf7V6d.js";const F=$({password:x().required("Required").min(6,"Password must be at least 6 characters"),confirm_password:x().required("Required").oneOf([E("password")],"Passwords do not match")}),T={class:"flex flex-col items-center"},W={class:"text-[24px] font-bold"},j={class:"text-base font-medium max-w-[328px] text-center mt-4"},z={key:0,class:"w-[60%] mt-10 mb-8 flex flex-col gap-5"},Q={__name:"index",setup(A){const b=k(!1),y=R(),i=v(),c=N(),P=y.query.token,{mutateAsync:g,isLoading:h}=B.setPassword(),{handleSubmit:_}=S({validationSchema:F,initialValues:{password:"",confirm_password:""}}),m=_(async e=>{await g({bodyPayload:{password:e==null?void 0:e.password,token:P}}).then(s=>{var t;c.success(((t=s==null?void 0:s.data)==null?void 0:t.message)||"Password has been set successfully"),b.value=!0,i.push({path:"/user/login"})}).catch(s=>{var t;c.danger(((t=s==null?void 0:s.data)==null?void 0:t.error)||"Failed to set password")})});return(e,s)=>(r(),n(V,null,{content:d(()=>[o("form",{onSubmit:s[1]||(s[1]=(...t)=>a(m)&&a(m)(...t)),class:"flex flex-col w-[520px] min-h-[650px] gap-2 rounded-[32px] bg-background py-10 justify-between"},[o("div",T,[o("h1",W,u(e.successResetPassword?"Password Updated!":"Create New Password"),1),o("p",j,u(e.successResetPassword?"Please sign in to your account":""),1),e.successResetPassword?q("",!0):(r(),C("div",z,[p(w,{type:"password",name:"password",placeholder:"Enter new password"}),p(w,{type:"password",name:"confirm_password",placeholder:"Confirm new password"})])),e.successResetPassword?(r(),n(a(f),{key:2,type:"button",variant:"destructive",class:"w-[60%] h-[44px] text-center font-semibold mt-10",onClick:s[0]||(s[0]=()=>a(i).push({path:"/user/login"}))},{default:d(()=>s[3]||(s[3]=[l(" Go to Sign In ")])),_:1})):(r(),n(a(f),{key:1,loading:a(h),type:"submit",variant:"destructive",class:"w-[60%] h-[44px] text-center font-semibold"},{default:d(()=>s[2]||(s[2]=[l(" Create Password ")])),_:1},8,["loading"]))]),s[4]||(s[4]=o("div",null,null,-1))],32)]),_:1}))}};export{Q as default};
