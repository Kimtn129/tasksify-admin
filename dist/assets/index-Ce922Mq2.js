import{P as r,r as c,D as $,c as v,e as K,f as I,a as p,x as M,u as o,k as q,o as k,z as E,$ as F}from"./index-Cn06d1yw.js";import{_ as O}from"./Button-lUNRF2yf.js";import"./vue-query.util-evjr9S1L.js";import{T as d}from"./CustomToast.vue_vue_type_style_index_0_scoped_d3a5404c_lang-BP7u1LgJ.js";import{_ as u,a as U,i as j,f as z,u as L,b as Q,c as G,d as H,e as J,g as W}from"./SearchField-BxEEmBNo.js";import{a as X}from"./admin.service-Cu4hN8Kp.js";import{u as Y}from"./upperFirst-QAqnRZwx.js";import{p as Z}from"./parseISO-2i6OlswB.js";import{P as ee}from"./plus-ChCOcR35.js";import"./Icon-CBsTllnE.js";import"./error-input-DKRf7V6d.js";import"./icon-back-BpU1-qJd.js";import"./eye-CLyunyjW.js";const w=n=>{if(!n)return"N/A";try{const a=Z(n);return j(a)?z(a,"dd MMM yyyy"):"N/A"}catch(a){return console.error("Date formatting error:",a),"N/A"}},te=({setOpenPopup:n,setId:a})=>[{accessorKey:"startDate",header:({column:e})=>r(u,{column:e,title:"Start Date"}),cell:({row:e})=>r(d,{truncated:!0},()=>w(e.original.startDate)),enableSorting:!0},{accessorKey:"endDate",header:({column:e})=>r(u,{column:e,title:"End Date"}),cell:({row:e})=>r(d,{truncated:!0},()=>w(e.original.endDate)),enableSorting:!0},{accessorKey:"taskType",header:({column:e})=>r(u,{column:e,title:"Task Type"}),cell:({row:e})=>r(d,{truncated:!0,type:"primary"},()=>[Y(e.getValue("taskType"))]),enableSorting:!1,cellClass:"w-[150px]"},{accessorKey:"taskDetails",header:({column:e})=>r(u,{column:e,title:"Task Details"}),cell:({row:e})=>r(d,{truncated:!0},()=>e.getValue("taskDetails")),enableSorting:!1},{accessorKey:"actions",header:({column:e})=>r(u,{column:e,title:"Actions"}),cellClass:"w-[47px]",cell:({row:e})=>r(U,{actions:["edit","delete"],setOpenPopup:n,setId:()=>a(e.original)}),enableSorting:!1}],ae={key:0,class:"flex justify-between items-center mb-5"},se={class:"mt-[32px]"},we={__name:"index",props:{isRecent:{type:Boolean,default:!1}},setup(n){const a=n,e=c(""),D=c(""),S=c(!1),_=c(!1),T=c(null),x=q(),{sort:g,sortParams:i}=L({isMultiSort:!1,sortBy:"joinedDate",orderBy:"desc"}),{search:B,searchBy:b}=Q({search:"",searchBy:"name"}),{pagination:h,page:m,perPage:f}=G({writeQuery:!0}),y=c(B.value),R=$(()=>{var s,t;return{page:a.isRecent?1:m,take:a.isRecent?10:f,sort:a.isRecent?"asc":(s=i==null?void 0:i.value)==null?void 0:s.orderBy,sortBy:a.isRecent?"createdAt":(t=i==null?void 0:i.value)==null?void 0:t.sortBy,search:a.isRecent?"":y,searchBy:a.isRecent?"":b.value}}),{data:V,isFetching:P,refetch:re}=X.getTasks(R),{items:C}=H(V,{pagination:h}),N=te({setOpenPopup:s=>{s==="edit"&&(S.value=!0),s==="confirm"&&(_.value=!0)},setId:s=>{T.value=s}}),A=s=>{const t=s.target.value;F.replace({path:"/tasks",query:{...x.query,page:1,search:t}}),y.value=t};return(s,t)=>(k(),v("div",null,[a.isRecent?K("",!0):(k(),v("div",ae,[p(o(O),{variant:"destructive",class:"mt-2",onClick:t[0]||(t[0]=()=>console.log("add task"))},{default:M(()=>[p(o(ee),{class:"mr-2s"}),t[4]||(t[4]=E(" Add Task "))]),_:1}),p(J,{placeholder:"Search notification","handle-search":A})])),I("div",se,[p(W,{page:o(m),"per-page":o(f),sort:o(g),"active-row-id":D.value,searching:!!e.value,"enable-hover-on-row":!1,"header-height":58,"enable-row-selection":!1,"table-height":"100vh - 300px","item-name":"task",data:o(C),columns:o(N),pagination:o(h),"default-rows-per-page":10,"is-loading":o(P),"show-pagination":!a.isRecent,"onUpdate:page":t[1]||(t[1]=l=>m.value=l),"onUpdate:perPage":t[2]||(t[2]=l=>f.value=l),"onUpdate:sort":t[3]||(t[3]=l=>g.value=l)},null,8,["page","per-page","sort","active-row-id","searching","data","columns","pagination","is-loading","show-pagination"])])]))}};export{we as default};
