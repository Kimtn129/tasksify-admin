import{Q as q,m as $e,a9 as Ae,b as Ke,E as w,d as y,o as i,y as d,a as o,u as e,e as O,c as S,n as Q,A as V,C as K,G as B,K as H,L as te,a4 as ye,g as k,f as N,r as F,aa as re,T as ne,a7 as ae,ab as oe,l as Pe,i as Oe,D as Ue,a8 as Fe,F as Te,a0 as Ie}from"./index-Cbi0U6DV.js";import{_ as U,a as Ne,i as De,f as Me,o as je,p as Ee,S as Le,q as Re,r as ue,u as Ge,b as ze,c as Qe,d as He,e as Je,g as We}from"./SearchField-BSKMRoZw.js";import{u as Xe}from"./useToast-B4MSvbJT.js";import{c as C}from"./vue-query.util-lOWJ5HDm.js";import{a as z}from"./admin.service-B5sxvV3A.js";import{T}from"./CustomToast.vue_vue_type_style_index_0_scoped_d3a5404c_lang-BLp73gA1.js";import{p as Ze}from"./parseISO-B1Oq-0bC.js";import{c as Ye,a as et}from"./index.esm-DNmh2VVa.js";import{S as J,k as tt,l as at,m as lt,n as st,O as W,o as rt,p as nt,r as ot,s as ut,E as dt,D as it,a as ct,B as pt,t as ft,_ as I,L as mt}from"./Button-CUE8qzFr.js";import{_ as ee}from"./DialogComponent-B60xUe9I.js";import{_ as ge,a as de,c as yt,d as gt,F as j}from"./FormItemInput-P0g9CBxt.js";import{a as ht,b as vt,_ as bt}from"./PopoverContent-BpCVHD7q.js";import{P as xt}from"./plus-CaFZ2a7H.js";import"./Icon-CKJzfIt9.js";import"./error-input-BGMKAoGp.js";import"./icon-back-D1amKHfi.js";import"./eye-CAA7plyz.js";const qt=({setOpenPopup:l,setId:u})=>{const t=a=>{if(!a)return"N/A";try{const s=Ze(a);return De(s)?Me(s,"dd MMM yyyy"):"N/A"}catch(s){return console.error("Date formatting error:",s),"N/A"}};return[{accessorKey:"name",header:({column:a})=>q(U,{column:a,title:"Name"}),cell:({row:a})=>q(T,{truncated:!0,type:"primary"},()=>[a.getValue("name")||"N/A"]),enableSorting:!0,cellClass:"max-w-[300px] truncate"},{accessorKey:"email",header:({column:a})=>q(U,{column:a,title:"Email"}),cell:({row:a})=>q(T,{truncated:!0,type:"primary",title:a.getValue("email")},()=>[a.getValue("email")]),enableSorting:!1,cellClass:"max-w-[350px] truncate"},{accessorKey:"tier",header:({column:a})=>q(U,{column:a,title:"Tier"}),cell:({row:a})=>{const s=a.getValue("tier");return q(T,{truncated:!0,type:"primary",title:s==null?void 0:s.name},()=>[(s==null?void 0:s.name)||"N/A"])},enableSorting:!1,cellClass:"w-[150px]"},{accessorKey:"numberOfGroups",header:({column:a})=>q(U,{column:a,title:"Groups"}),cell:({row:a})=>q(T,{truncated:!0},()=>{var s;return[((s=a.getValue("numberOfGroups"))==null?void 0:s.toString())||"0"]}),enableSorting:!0,cellClass:"w-[100px] text-center"},{accessorKey:"numberOfOpeningTasks",header:({column:a})=>q(U,{column:a,title:"Open Tasks"}),cell:({row:a})=>q(T,{truncated:!0},()=>{var s;return[((s=a.getValue("numberOfOpeningTasks"))==null?void 0:s.toString())||"0"]}),enableSorting:!0,cellClass:"w-[120px] text-center"},{accessorKey:"joinedDate",header:({column:a})=>q(U,{column:a,title:"Joined Date"}),cell:({row:a})=>q(T,{truncated:!0},()=>[t(a.getValue("joinedDate"))]),enableSorting:!0,cellClass:"w-[130px]"},{accessorKey:"isActive",header:({column:a})=>q(U,{column:a,title:"Status"}),cell:({row:a})=>{const s=a.getValue("isActive");return q("span",{class:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${s?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`},s?"Active":"Inactive")},enableSorting:!1,cellClass:"w-[100px]"},{accessorKey:"actions",header:({column:a})=>q(U,{column:a,title:"Actions"}),cellClass:"w-[47px]",cell:({row:a})=>q(Ne,{actions:["edit","delete"],setOpenPopup:l,setId:()=>u(a.original)}),enableSorting:!1}]},ie=Ye({email:et().email("Email must be valid").required("Email is required")}),_t={key:2,class:"text-destructive"},St={__name:"FormFieldRadio",props:$e({name:{type:String,default:""},label:{type:String,default:""},description:{type:String,default:""},options:{type:Array,default:()=>[]},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:String,default:""},errors:{type:Object,default:()=>({})}},{modelValue:{type:String||Number,default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const u=l,{error:t,errors:a,name:s}=Ae(u),c=Ke(l,"modelValue"),r=w(()=>t.value||a.value[s.value]);return(g,_)=>(i(),y(e(ye),{name:e(s)},{default:d(()=>[o(e(ge),null,{default:d(()=>[l.label?(i(),y(e(de),{key:0,class:Q({required:l.required})},{default:d(()=>[V(K(l.label),1)]),_:1},8,["class"])):O("",!0),o(e(je),{modelValue:c.value,"onUpdate:modelValue":_[0]||(_[0]=x=>c.value=x),class:"flex flex-wrap gap-10"},{default:d(()=>[B(g.$slots,"default",{},()=>[(i(!0),S(H,null,te(l.options,x=>(i(),S("div",{key:x.value,class:"flex items-center gap-2"},[o(e(Ee),{value:x.value,disabled:l.disabled},null,8,["value","disabled"]),o(e(de),{class:"font-normal"},{default:d(()=>[V(K(x.label),1)]),_:2},1024)]))),128))])]),_:3},8,["modelValue"]),l.description?(i(),y(e(yt),{key:1},{default:d(()=>[V(K(l.description),1)]),_:1})):O("",!0),r.value?(i(),S("div",_t,K(r.value),1)):O("",!0)]),_:3})]),_:3},8,["name"]))}},Vt={__name:"Command",props:{modelValue:{type:null,required:!1,default:""},defaultValue:{type:null,required:!1},open:{type:Boolean,required:!1,default:!0},defaultOpen:{type:Boolean,required:!1},searchTerm:{type:String,required:!1},multiple:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},name:{type:String,required:!1},dir:{type:String,required:!1},filterFunction:{type:Function,required:!1},displayValue:{type:Function,required:!1},resetSearchTermOnBlur:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["update:modelValue","update:open","update:searchTerm"],setup(l,{emit:u}){const t=l,a=u,s=w(()=>{const{class:r,...g}=t;return g}),c=J(s,a);return(r,g)=>(i(),y(e(tt),k(e(c),{class:e(C)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t.class)}),{default:d(()=>[B(r.$slots,"default")]),_:3},16,["class"]))}},wt={__name:"CommandEmpty",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(l){const u=l,t=w(()=>{const{class:a,...s}=u;return s});return(a,s)=>(i(),y(e(at),k(t.value,{class:e(C)("py-6 text-center text-sm",u.class)}),{default:d(()=>[B(a.$slots,"default")]),_:3},16,["class"]))}},ce={__name:"CommandGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1},heading:{type:String,required:!1}},setup(l){const u=l,t=w(()=>{const{class:a,...s}=u;return s});return(a,s)=>(i(),y(e(st),k(t.value,{class:e(C)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",u.class)}),{default:d(()=>[l.heading?(i(),y(e(lt),{key:0,class:"px-2 py-1.5 text-xs font-medium text-muted-foreground"},{default:d(()=>[V(K(l.heading),1)]),_:1})):O("",!0),B(a.$slots,"default")]),_:3},16,["class"]))}},Ct={class:"flex items-center border-b px-3","cmdk-input-wrapper":""},Bt=Object.assign({inheritAttrs:!1},{__name:"CommandInput",props:{type:{type:String,required:!1},disabled:{type:Boolean,required:!1},autoFocus:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(l){const u=l,t=w(()=>{const{class:s,...c}=u;return c}),a=W(t);return(s,c)=>(i(),S("div",Ct,[o(e(Le),{class:"mr-2 h-4 w-4 shrink-0 opacity-50"}),o(e(rt),k({...e(a),...s.$attrs},{"auto-focus":"",class:e(C)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",u.class)}),null,16,["class"])]))}}),pe={__name:"CommandItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["select"],setup(l,{emit:u}){const t=l,a=u,s=w(()=>{const{class:r,...g}=t;return g}),c=J(s,a);return(r,g)=>(i(),y(e(nt),k(e(c),{class:e(C)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t.class)}),{default:d(()=>[B(r.$slots,"default")]),_:3},16,["class"]))}},kt={role:"presentation"},fe={__name:"CommandList",props:{forceMount:{type:Boolean,required:!1},position:{type:String,required:!1},bodyLock:{type:Boolean,required:!1},dismissable:{type:Boolean,required:!1,default:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},updatePositionStrategy:{type:String,required:!1},prioritizePosition:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},class:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside"],setup(l,{emit:u}){const t=l,a=u,s=w(()=>{const{class:r,...g}=t;return g}),c=J(s,a);return(r,g)=>(i(),y(e(ot),k(e(c),{class:e(C)("max-h-[300px] overflow-y-auto overflow-x-hidden",t.class)}),{default:d(()=>[N("div",kt,[B(r.$slots,"default")])]),_:3},16,["class"]))}},me={__name:"CommandSeparator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(l){const u=l,t=w(()=>{const{class:a,...s}=u;return s});return(a,s)=>(i(),y(e(ut),k(t.value,{class:e(C)("-mx-1 h-px bg-border",u.class)}),{default:d(()=>[B(a.$slots,"default")]),_:3},16,["class"]))}},$t={__name:"TagsInput",props:{modelValue:{type:Array,required:!1},defaultValue:{type:Array,required:!1},addOnPaste:{type:Boolean,required:!1},addOnTab:{type:Boolean,required:!1},addOnBlur:{type:Boolean,required:!1},duplicate:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},delimiter:{type:String,required:!1},dir:{type:String,required:!1},max:{type:Number,required:!1},required:{type:Boolean,required:!1},name:{type:String,required:!1},id:{type:String,required:!1},convertValue:{type:Function,required:!1},displayValue:{type:Function,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["update:modelValue","invalid"],setup(l,{emit:u}){const t=l,a=u,s=w(()=>{const{class:r,...g}=t;return g}),c=J(s,a);return(r,g)=>(i(),y(e(dt),k(e(c),{class:e(C)("flex flex-wrap gap-2 items-center rounded-md border border-input bg-background px-3 py-2 text-sm",t.class)}),{default:d(()=>[B(r.$slots,"default")]),_:3},16,["class"]))}},At={__name:"TagsInputItem",props:{value:{type:[String,Object],required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(l){const u=l,t=w(()=>{const{class:s,...c}=u;return c}),a=W(t);return(s,c)=>(i(),y(e(it),k(e(a),{class:e(C)("flex h-6 items-center rounded bg-secondary data-[state=active]:ring-ring data-[state=active]:ring-2 data-[state=active]:ring-offset-2 ring-offset-background",u.class)}),{default:d(()=>[B(s.$slots,"default")]),_:3},16,["class"]))}},Kt={__name:"TagsInputItemDelete",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(l){const u=l,t=w(()=>{const{class:s,...c}=u;return c}),a=W(t);return(s,c)=>(i(),y(e(pt),k(e(a),{class:e(C)("flex rounded bg-transparent mr-1",u.class)}),{default:d(()=>[B(s.$slots,"default",{},()=>[o(e(ct),{class:"w-4 h-4"})])]),_:3},16,["class"]))}},Pt={__name:"TagsInputItemText",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(l){const u=l,t=w(()=>{const{class:s,...c}=u;return c}),a=W(t);return(s,c)=>(i(),y(e(ft),k(e(a),{class:e(C)("py-1 px-2 text-sm rounded bg-transparent",u.class)}),null,16,["class"]))}},Ot={key:1,class:"placeholder-placeholder text-base leading-none"},Ut=["title"],Ft={class:"absolute ml-auto h-full flex right-0 pr-3 pl-2 items-center"},Tt={key:1,class:"border-[1px] mr-2 rounded-[2px] h-[14px] w-[14px]"},It={key:1,class:"border-[1px] mr-2 rounded-[2px] h-[14px] w-[14px] border-grey-100 flex-shrink-0"},Nt=["title"],Dt={key:0,class:"flex justify-center my-2"},Mt={class:"px-[15px] py-[10px] flex justify-between"},jt={__name:"MultiSelect",props:{options:{type:Array,required:!1},placeholder:{type:String,required:!1,default:"Select..."},defaultValues:{type:Array,required:!1,default(){return[]}},loading:{type:Boolean,required:!1,default:!1},lazy:{type:Boolean,required:!1,default:!1},labelKey:{type:String,required:!1,default:"label"},valueKey:{type:String,required:!1,default:"value"},hasAllOption:{type:Boolean,required:!1,default:!1},triggerClass:{type:String,required:!1,default:""},isError:{type:Boolean,required:!1,default:!1},isTagSelect:{type:Boolean,required:!1,default:!1},returnFullOption:{type:Boolean,required:!1,default:!1},searchKeys:{type:Array,required:!1,default:()=>[]},values:{type:Array,required:!1,default(){return[]}},popoverContentConfig:{type:Object,required:!1,default:()=>({})}},emits:["scrollToBottom","change"],setup(l,{emit:u}){const t=l,a=u,s=F(!1),c=re({isSelectAll:!1,selectedValues:[]}),r=re({isSelectAll:!1,selectedValues:t.defaultValues}),g=f=>{const m=r.selectedValues.findIndex(p=>p[t.valueKey]===f[t.valueKey]);m>-1?r.selectedValues.splice(m,1):r.selectedValues.push(f)},_=w(()=>r.isSelectAll?"All":r.selectedValues.length?r.selectedValues.map(f=>f[t.labelKey]).join(", "):t.placeholder),x=()=>{s.value=!0},E=()=>{s.value=!1},L=f=>{f?(c.selectedValues.splice(0,c.selectedValues.length,...r.selectedValues),c.isSelectAll=r.isSelectAll):(r.selectedValues.splice(0,r.selectedValues.length,...c.selectedValues),r.isSelectAll=c.isSelectAll,E())},P=()=>{r.selectedValues.splice(0,r.selectedValues.length),r.isSelectAll=!1},X=()=>{E(),t.returnFullOption?a("change",r.selectedValues):a("change",r.selectedValues.map(f=>f[t.valueKey]))},Z=()=>{r.isSelectAll?P():(r.isSelectAll=!0,r.selectedValues.splice(0,r.selectedValues.length,...t.options))};ne(()=>r.selectedValues,f=>{f.length&&f.length===t.options.length?r.isSelectAll=!0:r.isSelectAll=!1},{deep:!0,immediate:!0});const R=f=>{const m=f.target.scrollHeight-f.target.scrollTop-f.target.clientHeight;t.lazy&&m<2&&!t.loading&&a("scrollToBottom")},D=f=>{const m=r.selectedValues.filter(p=>p[t.valueKey]!=f[t.valueKey]);if(r.selectedValues=[...m],!s.value){const p=t.returnFullOption?m:m.map(h=>h[t.valueKey]);a("change",p)}};ne(()=>[t.values,t.options],()=>{var f;if(t!=null&&t.values&&((f=t==null?void 0:t.options)!=null&&f.length)){const m=t.values.map(p=>{if(p[t.valueKey]&&p[t.labelKey])return p;{let h=t.options.find($=>$[t.valueKey]===p);if(h)return h}});r.selectedValues=[...m]}},{immediate:!0});function M(f,m){return t.searchKeys.length?t.options.filter(p=>t.searchKeys.some(h=>{var $,G;return(G=($=p[h])==null?void 0:$.toString().toLowerCase())==null?void 0:G.includes(m.toLowerCase())})).map(p=>p[t.valueKey]):t.options.filter(p=>{var h,$;return($=(h=p[t.labelKey])==null?void 0:h.toString().toLowerCase())==null?void 0:$.includes(m.toLowerCase())}).map(p=>p[t.valueKey])}return(f,m)=>(i(),y(e(bt),{open:s.value,"onUpdate:open":m[1]||(m[1]=p=>L(p))},{default:d(()=>[o(e(ht),{"as-child":""},{default:d(()=>[B(f.$slots,"popover-trigger",{openPopup:x},()=>[o(e(I),{variant:"outline",role:"combobox",class:Q(e(C)("w-full gap-[10px] min-h-[36px] items-center justify-start border-grey-400 py-1 px-3 pr-6 overflow-hidden relative font-normal !mt-[5px]",!r.selectedValues.length&&"text-muted-foreground",l.isError?"border-destructive":"border-input",l.triggerClass)),onClick:x},{default:d(()=>{var p;return[l.isTagSelect?(i(),S(H,{key:0},[(p=r.selectedValues)!=null&&p.length?(i(),y(e($t),{key:0,class:"flex gap-2 rounded-none flex-wrap border-0 items-center p-0 grow max-w-full max-h-[58.5px] overflow-y-auto mr-4","model-value":r.selectedValues},{default:d(()=>[(i(!0),S(H,null,te(r.selectedValues,h=>(i(),y(e(At),{key:`${h[t.valueKey]}-${h[t.labelKey]}`,value:String(h[t.labelKey]),class:"flex items-center justify-center gap-1 text-grey-700 bg-grey-50 aria-[current=true]:bg-grey-50 border border-grey-100 rounded-full px-1 h-auto data-[state=active]:ring-1 data-[state=active]:ring-grey-700 max-w-[150px] cursor-auto select-text",onClick:m[0]||(m[0]=ae(()=>{},["stop"]))},{default:d(()=>[B(f.$slots,"selected-item-content",{item:h},()=>[o(e(Pt),{as:"p",title:String(h[t.labelKey]),class:"truncate max-w-full py-0 leading-[22px]"},null,8,["title"])]),o(e(Kt),{onClick:()=>D(h)},null,8,["onClick"])]),_:2},1032,["value"]))),128))]),_:3},8,["model-value"])):(i(),S("span",Ot,K(l.placeholder),1))],64)):(i(),S("span",{key:1,title:_.value,class:"font-normal text-[13px] leading-[24px] truncate max-w-[95%]"},K(_.value),9,Ut)),N("div",Ft,[o(e(Re),{class:"h-4 w-4 shrink-0 opacity-50"})])]}),_:3},8,["class"])])]),_:3}),o(e(vt),k({"side-offset":5,class:["p-0","popoverContent_full_width h-[224px]"]},l.popoverContentConfig),{default:d(()=>[o(e(Vt),{multiple:"","filter-function":M,class:"max-h-[168px]"},{default:d(()=>[l.hasAllOption?(i(),y(e(fe),{key:0},{default:d(()=>[o(e(ce),null,{default:d(()=>[o(e(pe),{key:"all",value:"all",class:"data-[highlighted]:bg-grey-50",onSelect:Z},{default:d(()=>[r.isSelectAll?(i(),y(e(ue),{key:0,class:Q(e(C)("mr-2 h-[14px] w-[14px] rounded-[2px] bg-accent text-background",r.isSelectAll?"opacity-100":"opacity-0"))},null,8,["class"])):(i(),S("div",Tt)),m[2]||(m[2]=V(" All "))]),_:1})]),_:1})]),_:1})):O("",!0),l.hasAllOption?(i(),y(e(me),{key:1})):O("",!0),o(e(Bt),{placeholder:"Search"}),o(e(wt),null,{default:d(()=>[V(K(f.$t("common.no_results_found")),1)]),_:1}),o(e(fe),{onScroll:R},{default:d(()=>[o(e(ce),null,{default:d(()=>[(i(!0),S(H,null,te(l.options,p=>(i(),y(e(pe),{key:p[l.valueKey],value:p[l.valueKey],class:"data-[highlighted]:bg-grey-50",onSelect:ae(()=>{g(p)},["prevent"])},{default:d(()=>[r.selectedValues.find(h=>h[l.valueKey]===p[l.valueKey])||r.isSelectAll?(i(),y(e(ue),{key:0,class:Q(e(C)("mr-2 h-[14px] w-[14px] rounded-[2px] text-primary-blue border border-primary-blue flex-shrink-0",r.selectedValues.find(h=>h[l.valueKey]===p[l.valueKey])||r.isSelectAll?"opacity-100":"opacity-0"))},null,8,["class"])):(i(),S("div",It)),B(f.$slots,"option-content",{option:p,labelKey:l.labelKey,valueKey:l.valueKey},()=>[N("span",{title:p[l.labelKey],class:"truncate text-secondary"},K(p[l.labelKey]),9,Nt)])]),_:2},1032,["value","onSelect"]))),128)),l.loading?(i(),S("div",Dt,[o(e(mt),{class:"animate-spin"})])):O("",!0)]),_:3})]),_:3})]),_:3}),o(e(me)),N("div",Mt,[o(e(I),{variant:"ghost",onClick:P},{default:d(()=>m[3]||(m[3]=[V("Clear")])),_:1}),o(e(I),{onClick:X,variant:"destructive"},{default:d(()=>m[4]||(m[4]=[V("Apply")])),_:1})])]),_:3},16)]),_:3},8,["open"]))}},Et={key:0,class:"text-red-700"},Lt={__name:"FormFieldMultiSelect",props:{isViewMode:{type:Boolean,default:!1},options:{type:null,default:[]},name:{type:String,default:""},type:{type:String,default:"text"},label:{type:String,default:""},placeholder:{type:String,default:""},description:{type:String,default:""},required:{type:Boolean,default:!1},error:{type:String,default:""},errors:{type:Object,default:()=>({})}},setup(l){const u=(t,a)=>{a(t)};return(t,a)=>(i(),y(e(ye),{name:l.name},{default:d(({value:s,handleChange:c,errorMessage:r})=>[o(e(ge),{class:"flex flex-col mt-4"},{default:d(()=>[o(e(T),{font:"semi",class:"!text-[14px]"},{default:d(()=>[V(K(l.label)+" ",1),l.isViewMode?O("",!0):(i(),S("span",Et,"*"))]),_:1}),l.isViewMode?(i(),y(e(T),{key:0,title:e(oe)(s,"name"),as:"p",class:"mt-[5px] pt-[5px] border-t border-solid truncate"},{default:d(()=>[V(K(e(oe)(s,"name")||"-"),1)]),_:2},1032,["title"])):(i(),y(e(jt),{key:1,options:l.options,values:s,"label-key":"label","value-key":"id","is-error":!!r,placeholder:l.placeholder,onChange:g=>u(g,c)},null,8,["options","values","is-error","placeholder","onChange"])),o(e(gt))]),_:2},1024)]),_:1},8,["name"]))}},Rt={key:0,class:"flex justify-between items-center mb-5"},Gt={class:"mt-[32px]"},zt={class:"mt-4 flex justify-end items-center"},ca={__name:"index",props:{isRecent:{type:Boolean,default:!1}},setup(l){const u=l,t=[{id:1,value:1,label:"Administrator"},{id:2,value:2,label:"Normal User"}],a=F(""),s=F(""),c=F(!1),r=F(!1),g=F(!1),_=F(null),x=Xe(),E=Pe(),{sort:L,sortParams:P}=Ge({isMultiSort:!1,sortBy:"createdAt",orderBy:"desc"}),{search:X,searchBy:Z}=ze({search:"",searchBy:"name"}),{pagination:R,page:D,perPage:M}=Qe({writeQuery:!0}),f=F(X.value),m=w(()=>{var b,n;return{page:u.isRecent?1:D,take:u.isRecent?10:M,sort:u.isRecent?"asc":(b=P==null?void 0:P.value)==null?void 0:b.orderBy,sortBy:u.isRecent?"createdAt":(n=P==null?void 0:P.value)==null?void 0:n.sortBy,search:u.isRecent?"":f,searchBy:u.isRecent?"":Z.value}}),{data:p,isFetching:h,refetch:$}=z.getUsers(m),{mutateAsync:G,isLoading:he}=z.addUser(),ve=z.updateUser(),be=z.deleteUser(),{items:xe}=He(p,{pagination:R}),le=w(()=>_.value?_.value:{email:""}),{errors:qe,handleSubmit:_e}=Oe({validationSchema:ie,initialValues:le}),Se=b=>{var n;_.value={...b,user_password:"",confirm_password:"",role_id:b.role_id,map_id:(n=b.map_id)==null?void 0:n.split(",")}},Y=Ue("role_id").value,Ve=qt({setOpenPopup:b=>{b==="edit"&&(r.value=!0),b==="confirm"&&(g.value=!0)},setId:Se}),we=_e(b=>{G({bodyPayload:b}).then(n=>{x.success(n.message||"User has been successfully added"),c.value=!1,$()}).catch(n=>{x.danger((n==null?void 0:n.error)||"Failed to add new user")})}),Ce=b=>{var v;const n=(v=_==null?void 0:_.value)==null?void 0:v.employee_id;if(!n)return x.danger("Invalid ID. Unable to update user.");ve.mutateAsync({bodyPayload:b,pathParams:{id:n}}).then(A=>{x.success(A.message||"User has been successfully updated"),r.value=!1,$()}).catch(A=>{var se;x.danger(((se=A==null?void 0:A.data)==null?void 0:se.error)||"Failed to update user")})},Be=b=>{var v;const n=(v=_==null?void 0:_.value)==null?void 0:v.employee_id;if(!n)return x.danger("Invalid ID. Unable to delete user.");be.mutateAsync({bodyPayload:b,pathParams:{id:n}}).then(A=>{x.success(A.message||"User has been successfully deleted"),g.value=!1,$()}).catch(A=>{x.danger((A==null?void 0:A.error)||"Failed to delete user")})},ke=b=>{const n=b.target.value;Ie.replace({path:"/admin/users",query:{...E.query,page:1,search:n}}),f.value=n};return(b,n)=>(i(),S("div",null,[u.isRecent?O("",!0):(i(),S("div",Rt,[o(e(I),{variant:"destructive",class:"mt-2",onClick:n[0]||(n[0]=v=>c.value=!0)},{default:d(()=>[o(e(xt),{class:"mr-2s"}),n[11]||(n[11]=V(" Add User "))]),_:1}),o(Je,{placeholder:"Search users name","handle-search":ke})])),N("div",Gt,[o(We,{page:e(D),"per-page":e(M),sort:e(L),"active-row-id":s.value,searching:!!a.value,"enable-hover-on-row":!1,"header-height":58,"enable-row-selection":!1,"table-height":"100vh - 350px","item-name":"member",data:e(xe),columns:e(Ve),pagination:e(R),"show-pagination":!u.isRecent,"default-rows-per-page":10,"is-loading":e(h),"onUpdate:page":n[1]||(n[1]=v=>D.value=v),"onUpdate:perPage":n[2]||(n[2]=v=>M.value=v),"onUpdate:sort":n[3]||(n[3]=v=>L.value=v)},null,8,["page","per-page","sort","active-row-id","searching","data","columns","pagination","show-pagination","is-loading"])]),o(ee,{modelValue:c.value,"onUpdate:modelValue":n[6]||(n[6]=v=>c.value=v),"is-show-footer":!1,title:"Add New User"},{default:d(()=>[N("form",{class:"max-w-[400px]",onSubmit:n[4]||(n[4]=ae(()=>{},["prevent"]))},[o(j,{label:"User Email",name:"email"})],32)]),footer:d(()=>[o(e(I),{variant:"destructive",loading:e(he),onClick:e(we)},{default:d(()=>n[12]||(n[12]=[V(" Add User ")])),_:1},8,["loading","onClick"]),o(e(I),{onClick:n[5]||(n[5]=v=>c.value=!1)},{default:d(()=>n[13]||(n[13]=[V(" Cancel ")])),_:1})]),_:1},8,["modelValue"]),o(ee,{modelValue:r.value,"onUpdate:modelValue":n[9]||(n[9]=v=>r.value=v),"is-show-footer":!1,title:"Modify User"},{default:d(()=>[o(e(Fe),{"initial-values":le.value,"validation-schema":e(ie),onSubmit:Ce},{default:d(()=>[o(j,{label:"User Name",name:"username"}),o(j,{label:"Business Email",name:"user_email"}),o(j,{label:"Password",name:"user_password"}),o(j,{label:"Confirm Password",name:"confirm_password"}),o(St,{modelValue:e(Y),"onUpdate:modelValue":n[7]||(n[7]=v=>Te(Y)?Y.value=v:null),name:"role_id",label:"Role",options:t,required:"",errors:e(qe)},null,8,["modelValue","errors"]),o(Lt,{name:"map_id",label:"Map Access",options:b.mapsList},null,8,["options"]),N("div",zt,[o(e(I),{type:"submit",variant:"destructive",class:"mr-4",loading:b.isUpdatingUser},{default:d(()=>n[14]||(n[14]=[V(" Save Changes ")])),_:1},8,["loading"]),o(e(I),{type:"button",variant:"outline",onClick:n[8]||(n[8]=v=>r.value=!1)},{default:d(()=>n[15]||(n[15]=[V(" Cancel ")])),_:1})])]),_:1},8,["initial-values","validation-schema"])]),_:1},8,["modelValue"]),o(ee,{modelValue:g.value,"onUpdate:modelValue":n[10]||(n[10]=v=>g.value=v),title:"Delete this user?",description:"Are you sure you want to delete this user?",onConfirm:Be},null,8,["modelValue"])]))}};export{ca as default};
