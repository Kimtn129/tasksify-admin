import{r as d,i as q,j as I,l as V,B as N,d as u,y as m,t as T,z as $,o as n,f as s,u as l,a as k,C as f,e as p,c as w,A as v,n as j}from"./index-Cbi0U6DV.js";import{c as F,a as z}from"./index.esm-DNmh2VVa.js";import{a as A}from"./auth.service-DhrNQ524.js";import"./vue-query.util-lOWJ5HDm.js";import{u as D}from"./useToast-B4MSvbJT.js";import{I as W}from"./icon-back-D1amKHfi.js";import{W as M}from"./Wrapper-s5bwIfmP.js";import{_ as U}from"./index-CqGDrZxV.js";import{_ as b}from"./Button-CUE8qzFr.js";import"./CustomToast.vue_vue_type_style_index_0_scoped_d3a5404c_lang-BLp73gA1.js";import"./error-input-BGMKAoGp.js";const G={class:"flex flex-col items-center"},H={class:"text-[24px] font-bold"},J={class:"text-base font-medium max-w-[328px] text-center mt-4"},K={class:"w-[60%] mt-10 mb-8"},O={class:"text-sm text-[#313131] font-medium mx-auto text-center translate-y-5"},Q={key:0},X={key:1},Y={class:"text-red-400 font-bold ml-1"},ce={__name:"index",setup(Z){const g=F({user_email:z().required("Required").email("Invalid email format")}),t=d(!1),a=d(),r=d(null),h=T(),c=V(),R=D(),{mutateAsync:S,isLoading:E}=A.forgotPassword(),{handleSubmit:B,setFieldError:C}=q({validationSchema:g,initialValues:{user_email:""}});I(()=>{c.query.checkEmailReset==="true"&&c.query.user_email&&(t.value=!0,_())}),N(()=>{r.value&&clearInterval(r.value)});const _=()=>{a.value=59,r.value=setInterval(()=>{a.value>0?a.value-=1:clearInterval(r.value)},1e3)},x=async i=>{await S({bodyPayload:{user_email:i}}).then(e=>{var o;R.success(((o=e==null?void 0:e.data)==null?void 0:o.message)||"Success, please check your email"),t.value=!0,h.push({query:{user_email:i,checkEmailReset:!0}}),_()}).catch(e=>{var o;C("user_email",(o=e==null?void 0:e.data)==null?void 0:o.error)})},y=B(async i=>{await x(i.user_email)}),L=async()=>{a.value===0&&t.value&&await x(c.query.user_email)};return(i,e)=>{const o=$("RouterLink");return n(),u(M,null,{content:m(()=>[s("form",{onSubmit:e[0]||(e[0]=(...P)=>l(y)&&l(y)(...P)),class:"flex flex-col w-[520px] min-h-[650px] gap-2 rounded-[32px] bg-background py-10 justify-between"},[s("div",G,[s("h1",H,f(t.value?"Email Sent!":"Reset Password"),1),s("p",J,f(t.value?"Please check your inbox, we’ve sent password reset link to your email address":"Enter email address and we will send a link to reset your password"),1),s("div",K,[t.value?p("",!0):(n(),u(U,{key:0,name:"user_email",placeholder:"example@mail.com"})),s("div",O,[t.value?(n(),w("span",Q," Didn’t receive email?")):p("",!0),a.value>0&&t.value?(n(),w("span",X,[e[1]||(e[1]=s("span",null," Resend link in",-1)),s("span",Y,"00:"+f(a.value.toString().padStart(2,"0")),1)])):p("",!0)])]),t.value?(n(),u(l(b),{key:1,type:"submit",variant:"destructive",class:j([a.value>0?"bg-gray-500 text-white":"","w-[60%] h-[44px] text-center font-semibold"]),disabled:a.value>0,onClick:L},{default:m(()=>e[3]||(e[3]=[v(" Resend Link ")])),_:1},8,["class","disabled"])):(n(),u(l(b),{key:0,loading:l(E),type:"submit",variant:"destructive",class:"w-[60%] h-[44px] text-center font-semibold"},{default:m(()=>e[2]||(e[2]=[v(" Reset Password ")])),_:1},8,["loading"]))]),k(o,{to:"/user/login",class:"text-destructive font-bold flex gap-2 items-center justify-center"},{default:m(()=>[k(l(W)),e[4]||(e[4]=v(" Back to Login "))]),_:1})],32)]),_:1})}}};export{ce as default};
