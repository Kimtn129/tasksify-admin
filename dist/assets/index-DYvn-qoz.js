import{Q as r,r as c,E as K,c as v,e as $,f as E,a as p,y as I,u as o,l as M,o as k,A as q,a0 as F}from"./index-Cbi0U6DV.js";import{_ as O}from"./Button-CUE8qzFr.js";import"./vue-query.util-lOWJ5HDm.js";import{T as d}from"./CustomToast.vue_vue_type_style_index_0_scoped_d3a5404c_lang-BLp73gA1.js";import{_ as u,a as U,i as j,f as Q,u as L,b as z,c as G,d as H,e as J,g as W}from"./SearchField-BSKMRoZw.js";import{a as X}from"./admin.service-B5sxvV3A.js";import{u as Y}from"./upperFirst-DL2S_n3h.js";import{p as Z}from"./parseISO-B1Oq-0bC.js";import{P as ee}from"./plus-CaFZ2a7H.js";import"./Icon-CKJzfIt9.js";import"./error-input-BGMKAoGp.js";import"./icon-back-D1amKHfi.js";import"./eye-CAA7plyz.js";const w=n=>{if(!n)return"N/A";try{const a=Z(n);return j(a)?Q(a,"dd MMM yyyy"):"N/A"}catch(a){return console.error("Date formatting error:",a),"N/A"}},te=({setOpenPopup:n,setId:a})=>[{accessorKey:"startDate",header:({column:e})=>r(u,{column:e,title:"Start Date"}),cell:({row:e})=>r(d,{truncated:!0},()=>w(e.original.startDate)),enableSorting:!0},{accessorKey:"endDate",header:({column:e})=>r(u,{column:e,title:"End Date"}),cell:({row:e})=>r(d,{truncated:!0},()=>w(e.original.endDate)),enableSorting:!0},{accessorKey:"taskType",header:({column:e})=>r(u,{column:e,title:"Task Type"}),cell:({row:e})=>r(d,{truncated:!0,type:"primary"},()=>[Y(e.getValue("taskType"))]),enableSorting:!1,cellClass:"w-[150px]"},{accessorKey:"taskDetails",header:({column:e})=>r(u,{column:e,title:"Task Details"}),cell:({row:e})=>r(d,{truncated:!0},()=>e.getValue("taskDetails")),enableSorting:!1},{accessorKey:"actions",header:({column:e})=>r(u,{column:e,title:"Actions"}),cellClass:"w-[47px]",cell:({row:e})=>r(U,{actions:["edit","delete"],setOpenPopup:n,setId:()=>a(e.original)}),enableSorting:!1}],ae={key:0,class:"flex justify-between items-center mb-5"},se={class:"mt-[32px]"},we={__name:"index",props:{isRecent:{type:Boolean,default:!1}},setup(n){const a=n,e=c(""),S=c(""),_=c(!1),D=c(!1),T=c(null),B=M(),{sort:g,sortParams:i}=L({isMultiSort:!1,sortBy:"joinedDate",orderBy:"desc"}),{search:b,searchBy:x}=z({search:"",searchBy:"name"}),{pagination:h,page:m,perPage:f}=G({writeQuery:!0}),y=c(b.value),R=K(()=>{var s,t;return{page:a.isRecent?1:m,take:a.isRecent?10:f,sort:a.isRecent?"asc":(s=i==null?void 0:i.value)==null?void 0:s.orderBy,sortBy:a.isRecent?"createdAt":(t=i==null?void 0:i.value)==null?void 0:t.sortBy,search:a.isRecent?"":y,searchBy:a.isRecent?"":x.value}}),{data:V,isFetching:A,refetch:re}=X.getTasks(R),{items:C}=H(V,{pagination:h}),N=te({setOpenPopup:s=>{s==="edit"&&(_.value=!0),s==="confirm"&&(D.value=!0)},setId:s=>{T.value=s}}),P=s=>{const t=s.target.value;F.replace({path:"/tasks",query:{...B.query,page:1,search:t}}),y.value=t};return(s,t)=>(k(),v("div",null,[a.isRecent?$("",!0):(k(),v("div",ae,[p(o(O),{variant:"destructive",class:"mt-2",onClick:t[0]||(t[0]=()=>console.log("add task"))},{default:I(()=>[p(o(ee),{class:"mr-2s"}),t[4]||(t[4]=q(" Add Task "))]),_:1}),p(J,{placeholder:"Search notification","handle-search":P})])),E("div",se,[p(W,{page:o(m),"per-page":o(f),sort:o(g),"active-row-id":S.value,searching:!!e.value,"enable-hover-on-row":!1,"header-height":58,"enable-row-selection":!1,"table-height":"100vh - 300px","item-name":"task",data:o(C),columns:o(N),pagination:o(h),"default-rows-per-page":10,"is-loading":o(A),"show-pagination":!a.isRecent,"onUpdate:page":t[1]||(t[1]=l=>m.value=l),"onUpdate:perPage":t[2]||(t[2]=l=>f.value=l),"onUpdate:sort":t[3]||(t[3]=l=>g.value=l)},null,8,["page","per-page","sort","active-row-id","searching","data","columns","pagination","is-loading","show-pagination"])])]))}};export{we as default};
